<?xml version="1.0"?>
<launch>
  <arg name="domain" default="$(optenv ROBOT_DOMAIN_CONFIG )"/>
  <arg name="cam_to_scan_topic" default="$(arg domain)/laser/pcl_scan_filtered"/>
  <arg name="rs_cam_topic" default="$(arg domain)/rs_cam/depth/points"/>
	
	<arg name="target_scan_frame" default="rplidar" />
	<arg name="max_height" default="3.0"/>
	<arg name="min_height" default="0.0"/>
	<arg name="angle_min" default="-0.52"/>
	<arg name="angle_max" default="0.52"/>
	<arg name="range_max" default="3.0"/>
	<arg name="range_min" default="0.25"/>
	
	<!-- run pointcloud_to_laserscan node -->
	<node pkg="pointcloud_to_laserscan" type="pointcloud_to_laserscan_node" name="pcl_to_laserscan_node">
	  <remap from="cloud_in" to="$(arg rs_cam_topic)"/>
		<remap from="scan" to="$(arg domain)/laser/pcl_scan"/>
		<param name="target_frame" value="$(arg target_scan_frame)"/>
		<param name="max_height" value="$(arg max_height)"/>
		<param name="min_height" value="$(arg min_height)"/>
		<param name="angle_min" value="$(arg angle_min)"/>
		<param name="angle_max" value="$(arg angle_max)"/>	
		<param name="range_max" value="$(arg range_max)"/>
		<param name="range_min" value="$(arg range_min)"/>
		<param name="use_inf" value="true"/>
		<param name="concurrency_level" value="1"/>
	</node>

  <node pkg="laser_filters" type="scan_to_scan_filter_chain" name="cam_laser_filter_node">
		<rosparam command="load" file="$(find atemr_nav)/config/cam_to_scan_filter.yaml" />
		<remap from="scan" to="$(arg domain)/laser/pcl_scan"/>
		<remap from="scan_filtered" to="$(arg cam_to_scan_topic)"/>
	</node>
	


</launch>
